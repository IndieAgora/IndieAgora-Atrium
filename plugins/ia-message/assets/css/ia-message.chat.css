/* Discord-ish message blocks with clear in/out differentiation */
.ia-msg-bubble{
  overflow:hidden;
  max-width: 78%;
  margin: 10px 0;
  padding: 10px 12px;
  border: 1px solid var(--ia-line);
  border-radius: 14px;
  line-height: 1.35;
  font-size: 14px;
  color: var(--ia-text);

  /* Incoming default: darker reddit card */
  background:
    linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.22));
}

/* Incoming (other) — subtle cool tint so it’s not identical to panels */
.ia-msg-bubble:not(.mine){
  margin-right: auto;
  border-color: rgba(255,255,255,0.10);
  background:
    radial-gradient(520px 180px at 10% 0%, rgba(59,130,246,0.10), transparent 70%),
    linear-gradient(180deg, rgba(255,255,255,0.035), rgba(0,0,0,0.26));
}

/* Outgoing (mine) — right aligned, purple gradient */
.ia-msg-bubble.mine{
  margin-left: auto;
  border-color: rgba(167,139,250,0.38);
  background:
    radial-gradient(600px 180px at 20% 0%, rgba(124,58,237,0.26), transparent 70%),
    linear-gradient(180deg, rgba(124,58,237,0.12), rgba(0,0,0,0.24));
}

/* Content */
.ia-msg-body{
  white-space: pre-wrap;
  word-break: break-word;
}

/* Timestamp: slightly different tints */
.ia-msg-when{
  margin-top: 6px;
  font-size: 11px;
  opacity: 0.9;
  color: var(--ia-muted);
}

.ia-msg-bubble.mine .ia-msg-when{
  color: rgba(167,139,250,0.85);
}

.ia-msg-bubble:not(.mine) .ia-msg-when{
  color: rgba(148,163,184,0.85);
}


/* Rich embeds (attachments + link cards) */
.ia-msg-embed{
  margin-top: 10px;
}
.ia-msg-embed img{
  max-width: 100%;
  height: auto;
  border-radius: 10px;
  border: 1px solid var(--ia-line2);
  display:block;
}
.ia-msg-embed video,
.ia-msg-embed audio{
  width: 100%;
  max-width: 100%;
  border-radius: 10px;
  border: 1px solid var(--ia-line2);
  background: rgba(0,0,0,0.25);
}
.ia-msg-pill{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--ia-line2);
  background: rgba(0,0,0,0.28);
  color: var(--ia-text);
  text-decoration:none;
  font-size: 13px;
}
.ia-msg-pill:hover{
  border-color: rgba(167,139,250,0.35);
}
.ia-msg-linkcard{
  display:flex;
  gap: 10px;
  align-items:center;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--ia-line2);
  background: rgba(0,0,0,0.28);
  text-decoration:none;
  color: var(--ia-text);
}
.ia-msg-linkcard .ia-msg-link-ico{
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--ia-line2);
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(0,0,0,0.22);
  flex: 0 0 auto;
}
.ia-msg-linkcard .ia-msg-link-meta{
  min-width:0;
}
.ia-msg-linkcard .ia-msg-link-host{
  font-size: 12px;
  color: var(--ia-muted);
}
.ia-msg-linkcard .ia-msg-link-url{
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}


/* Inline media open buttons */
.ia-msg-media{
  width:100%;
  padding:0;
  border:0;
  background:transparent;
  cursor:pointer;
  position:relative;
  display:block;
}
.ia-msg-media img{
  display:block;
  width:100%;
  height:auto;
  border-radius:10px;
}
.ia-msg-media video,
.ia-msg-media audio{
  width:100%;
  border-radius:10px;
}
.ia-msg-media-open{
  position:absolute;
  right:10px;
  bottom:10px;
  background:rgba(0,0,0,.55);
  color:#fff;
  font-size:12px;
  padding:6px 8px;
  border-radius:10px;
  pointer-events:none;
}


/* Mobile-friendly media sizing: keep attachments from taking over the screen */
.ia-msg-embed img,
.ia-msg-media img{
  max-height: 240px;
  object-fit: contain;
  width: 100%;
}

.ia-msg-embed video,
.ia-msg-media video{
  max-height: 260px;
  width: 100%;
}

.ia-msg-embed iframe{
  width: 100% !important;
  max-height: 260px;
}

@media (max-width: 820px){
  .ia-msg-embed img,
  .ia-msg-media img{ max-height: 220px; }
  .ia-msg-embed video,
  .ia-msg-media video{ max-height: 240px; }
  .ia-msg-embed iframe{ max-height: 240px; }
}
/* --- Hardening: prevent message bubbles from exceeding viewport --- */

.iam-message-row,
.ia-message-row {
  min-width: 0;
  max-width: 100%;
}

.iam-bubble,
.ia-bubble,
.iam-message,
.ia-message,
.iam-message-body,
.ia-message-body,
.iam-message-text,
.ia-message-text {
  min-width: 0;
  max-width: 100%;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.iam-bubble *,
.ia-bubble * {
  max-width: 100%;
}
