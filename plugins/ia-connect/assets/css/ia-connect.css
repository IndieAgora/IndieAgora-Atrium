/* IA Connect - Facebook-ish cards, minimal, dark-friendly */
:root{
  --iac-bg: rgba(0,0,0,.35);
  --iac-card: rgba(20,20,20,.72);
  --iac-card2: rgba(28,28,28,.82);
  --iac-bd: rgba(255,255,255,.10);
  --iac-t: rgba(255,255,255,.92);
  --iac-t2: rgba(255,255,255,.70);
  --iac-chip: rgba(255,255,255,.08);
  --iac-chip2: rgba(255,255,255,.12);
  --iac-ac: rgba(120,170,255,.95);
}

.iac-top-search{position:sticky;top:0;z-index:50;padding:10px 14px;background:linear-gradient(to bottom, rgba(0,0,0,.55), rgba(0,0,0,0));backdrop-filter:blur(10px);}
.iac-search{max-width:740px;margin:0 auto;position:relative;}
.iac-search-input{width:100%;padding:12px 14px;border-radius:999px;border:1px solid var(--iac-bd);background:rgba(0,0,0,.35);color:var(--iac-t);outline:none;}
.iac-search-results{position:absolute;left:0;right:0;top:calc(100% + 8px);background:var(--iac-card2);border:1px solid var(--iac-bd);border-radius:14px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.45);}
.iac-search-row{display:flex;gap:10px;align-items:center;padding:10px 12px;border-top:1px solid var(--iac-bd);cursor:pointer;}
.iac-search-row:first-child{border-top:0;}
.iac-search-row:hover{background:rgba(255,255,255,.06);}
.iac-search-ava{width:34px;height:34px;border-radius:50%;object-fit:cover;}
.iac-search-txt{min-width:0;}
.iac-search-name{font-weight:650;color:var(--iac-t);line-height:1.1;}
.iac-search-sub{color:var(--iac-t2);font-size:12px;}
.iac-search-hdr{padding:8px 12px;color:var(--iac-t2);font-size:12px;background:rgba(255,255,255,.03);}

.iac-profile{max-width:1200px;margin:0 auto 34px auto;padding:0 18px;}
.iac-cover{position:relative;border-radius:18px;overflow:hidden;border:1px solid var(--iac-bd);background:rgba(255,255,255,.05);height:320px;cursor:pointer;}
.iac-cover-img{width:100%;height:100%;object-fit:cover;display:block;}
.iac-cover-fallback{width:100%;height:100%;background:linear-gradient(135deg, rgba(255,255,255,.07), rgba(255,255,255,.02));}
.iac-cover-change{position:absolute;right:14px;bottom:14px;z-index:6;border:1px solid var(--iac-bd);background:rgba(0,0,0,.55);color:var(--iac-t);border-radius:999px;padding:10px 14px;cursor:pointer;}

.iac-head{display:flex;gap:18px;align-items:flex-end;margin-top:-54px;padding:0 10px 14px 10px;}
.iac-avatar{position:relative;width:116px;height:116px;border-radius:50%;overflow:hidden;border:4px solid rgba(10,10,10,.85);box-shadow:0 10px 35px rgba(0,0,0,.5);cursor:pointer;flex:0 0 auto;}
.iac-avatar-img{width:100%;height:100%;object-fit:cover;display:block;}
.iac-avatar-change{position:absolute;left:50%;transform:translateX(-50%);bottom:6px;border:1px solid var(--iac-bd);background:rgba(0,0,0,.55);color:var(--iac-t);border-radius:999px;padding:6px 10px;font-size:12px;cursor:pointer;}

.iac-meta{min-width:0;padding-bottom:10px;}
.iac-name{font-size:28px;font-weight:750;color:var(--iac-t);line-height:1.05;}
.iac-sub{margin-top:4px;color:var(--iac-t2);font-size:13px;}

.iac-actions{margin-left:auto;padding-bottom:10px;}
.iac-msg{display:inline-flex;align-items:center;gap:10px;border:1px solid var(--iac-bd);background:rgba(255,255,255,.06);color:var(--iac-t);border-radius:12px;padding:10px 14px;cursor:pointer;}
.iac-msg:hover{background:rgba(255,255,255,.10);}
.iac-msg-ic{width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center;opacity:.9;}

.iac-tabs{display:flex;gap:10px;margin:0 10px 12px 10px;padding:10px;border-radius:14px;border:1px solid var(--iac-bd);background:var(--iac-card);}
.iac-tab{border:1px solid var(--iac-bd);background:rgba(255,255,255,.04);color:var(--iac-t);border-radius:999px;padding:10px 14px;cursor:pointer;font-weight:650;}
.iac-tab.is-active{background:rgba(255,255,255,.12);}

.iac-panel{display:none;margin:0 10px;}
.iac-panel.is-active{display:block;}

/* Composer */
.iac-composer{position:relative;top:auto;z-index:5;margin-bottom:14px;border:1px solid var(--iac-bd);background:var(--iac-card2);border-radius:16px;padding:12px 12px 10px 12px;}
.iac-composer-title{color:var(--iac-t2);font-size:12px;margin-bottom:10px;}
.iac-input{width:100%;border:1px solid var(--iac-bd);background:rgba(0,0,0,.25);color:var(--iac-t);border-radius:12px;padding:10px 12px;outline:none;}
.iac-textarea{width:100%;min-height:88px;resize:vertical;border:1px solid var(--iac-bd);background:rgba(0,0,0,.25);color:var(--iac-t);border-radius:12px;padding:10px 12px;outline:none;margin-top:10px;}
.iac-attach-row{display:flex;gap:12px;align-items:center;margin-top:10px;flex-wrap:wrap;}
.iac-attach-btn{display:inline-flex;align-items:center;justify-content:center;border:1px solid var(--iac-bd);background:rgba(255,255,255,.05);color:var(--iac-t);border-radius:999px;padding:8px 12px;cursor:pointer;}
.iac-attach-btn input{display:none;}
.iac-attach-meta{color:var(--iac-t2);font-size:12px;}
.iac-attach-preview{margin-top:10px;display:flex;gap:10px;overflow:auto;padding-bottom:4px;}
.iac-prev{flex:0 0 auto;width:86px;height:86px;border-radius:12px;border:1px solid var(--iac-bd);background:rgba(0,0,0,.25);display:flex;align-items:center;justify-content:center;overflow:hidden;color:var(--iac-t2);font-size:12px;}
.iac-prev img,.iac-prev video{width:100%;height:100%;object-fit:cover;display:block;}

.iac-composer-actions{display:flex;justify-content:flex-end;margin-top:10px;}
.iac-post{border:0;background:var(--iac-ac);color:#06101f;border-radius:12px;padding:10px 14px;font-weight:750;cursor:pointer;}
.iac-post:disabled{opacity:.6;cursor:not-allowed;}

/* Feed cards */
.iac-feed-inner{display:flex;flex-direction:column;gap:14px;overflow-anchor:none;}
.iac-card{border:1px solid var(--iac-bd);background:var(--iac-card2);border-radius:16px;overflow:hidden;overflow-anchor:none;}
.iac-card-head{display:flex;gap:10px;align-items:center;padding:12px 12px 10px 12px;}
.iac-card-ava{width:40px;height:40px;border-radius:50%;object-fit:cover;}
.iac-card-hmeta{min-width:0;}
.iac-card-author{font-weight:700;color:var(--iac-t);line-height:1.1;}
.iac-userlink{background:transparent;border:0;color:inherit;font:inherit;font-weight:700;cursor:pointer;padding:0;}
.iac-userlink:hover{text-decoration:underline;}
.iac-card-time{color:var(--iac-t2);font-size:12px;margin-top:2px;}
.iac-card-body{padding:0 12px 12px 12px;color:var(--iac-t);}
.iac-card-title{font-size:16px;font-weight:750;margin-top:2px;margin-bottom:6px;}
.iac-card-text{white-space:pre-wrap;line-height:1.35;color:var(--iac-t);}
.iac-mention{color:var(--iac-ac);cursor:pointer;text-decoration:none;}

/* Video embeds (YouTube/Vimeo/PeerTube/etc) */
.iac-embeds{margin-top:10px;display:flex;flex-direction:column;gap:10px;}
.iac-video-embed{position:relative;width:100%;max-width:560px;aspect-ratio:16/9;border:1px solid var(--iac-bd);border-radius:14px;overflow:hidden;background:rgba(0,0,0,.65);}
.iac-video-embed iframe,.iac-video-embed video{position:absolute;inset:0;width:100%;height:100%;border:0;display:block;}

@media (min-width: 980px){
  /* Keep embeds from becoming huge on desktop */
  .iac-video-embed{max-width:520px;}
}

/* Gallery */
.iac-gallery{margin-top:10px;border:1px solid var(--iac-bd);border-radius:14px;overflow:hidden;background:rgba(0,0,0,.15);}
.iac-g-stage{position:relative;overflow-anchor:none;}
/* Keep gallery height stable so navigation doesn't cause scroll anchoring jumps */
.iac-g-media{width:100%;height:360px;display:flex;align-items:center;justify-content:center;overflow:hidden;overflow-anchor:none;}
.iac-g-media img,.iac-g-media video{width:100%;height:360px;object-fit:contain;background:rgba(0,0,0,.35);}
.iac-g-nav{position:absolute;top:50%;transform:translateY(-50%);width:40px;height:40px;border-radius:50%;border:1px solid var(--iac-bd);background:rgba(0,0,0,.55);color:var(--iac-t);display:flex;align-items:center;justify-content:center;cursor:pointer;}
.iac-g-prev{left:10px;}
.iac-g-next{right:10px;}
.iac-g-count{position:absolute;right:10px;bottom:10px;border:1px solid var(--iac-bd);background:rgba(0,0,0,.55);color:var(--iac-t);border-radius:999px;padding:6px 10px;font-size:12px;}

.iac-card-actions{display:flex;gap:10px;align-items:center;padding:10px 12px;border-top:1px solid var(--iac-bd);}
.iac-act{border:1px solid var(--iac-bd);background:rgba(255,255,255,.04);color:var(--iac-t);border-radius:12px;padding:8px 10px;cursor:pointer;font-weight:650;}
.iac-act:hover{background:rgba(255,255,255,.08);}

.iac-comments{padding:10px 12px 12px 12px;border-top:1px solid var(--iac-bd);}
.iac-comment{display:flex;gap:10px;align-items:flex-start;margin-top:10px;}
.iac-comment:first-child{margin-top:0;}
.iac-comment-ava{width:30px;height:30px;border-radius:50%;object-fit:cover;}
.iac-comment-bub{border:1px solid var(--iac-bd);background:rgba(0,0,0,.25);border-radius:14px;padding:8px 10px;min-width:0;flex:1;}
.iac-comment-a{font-weight:700;color:var(--iac-t);font-size:13px;}
.iac-comment-t{color:var(--iac-t);font-size:13px;white-space:pre-wrap;line-height:1.3;margin-top:2px;}

/* Highlight comment when opened from an email deep-link (?ia_comment=ID) */
.iac-comment.iac-comment-highlight .iac-comment-bub{box-shadow:0 0 0 2px rgba(255,255,255,0.22),0 0 0 4px rgba(100,200,255,0.12);}
.iac-comment-form{display:flex;gap:10px;align-items:center;margin-top:10px;}
.iac-comment-input{flex:1;border:1px solid var(--iac-bd);background:rgba(0,0,0,.25);color:var(--iac-t);border-radius:999px;padding:10px 12px;outline:none;}
.iac-comment-send{border:0;background:rgba(255,255,255,.12);color:var(--iac-t);border-radius:999px;padding:10px 12px;cursor:pointer;font-weight:700;}

.iac-loadmore-wrap{display:flex;justify-content:center;margin:16px 0 6px;}
.iac-loadmore{border:1px solid var(--iac-bd);background:rgba(255,255,255,.05);color:var(--iac-t);border-radius:999px;padding:10px 14px;cursor:pointer;}

/* Viewer */
.iac-viewer{position:fixed;inset:0;z-index:1000;}
.iac-viewer-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.7);}
.iac-viewer-sheet{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:18px;}
.iac-viewer-body{max-width:1100px;max-height:90vh;width:100%;}
.iac-viewer-body img,.iac-viewer-body video{max-width:100%;max-height:90vh;display:block;margin:0 auto;border-radius:14px;background:rgba(0,0,0,.35);}
.iac-viewer-body iframe{width:100%;height:90vh;border:0;border-radius:14px;background:rgba(0,0,0,.35);}
.iac-viewer-x{position:absolute;top:14px;right:14px;width:44px;height:44px;border-radius:50%;border:1px solid var(--iac-bd);background:rgba(0,0,0,.55);color:var(--iac-t);font-size:26px;cursor:pointer;display:flex;align-items:center;justify-content:center;}

/* Fullscreen post modal (Discuss-like) */
.iac-modal{position:fixed;inset:0;z-index:9999999999;}
.iac-modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.72);}
.iac-modal-sheet{position:absolute;inset:0;background:rgba(0,0,0,.9);display:flex;flex-direction:column;}
.iac-modal-top{display:flex;align-items:center;gap:10px;padding:12px;border-bottom:1px solid var(--iac-bd);background:rgba(0,0,0,.65);}
.iac-modal-back{width:42px;height:42px;border-radius:12px;border:1px solid var(--iac-bd);background:rgba(255,255,255,.05);color:var(--iac-t);cursor:pointer;font-size:18px;}
.iac-modal-title{font-weight:800;color:var(--iac-t);flex:1;}
.iac-modal-actions{display:flex;gap:8px;}
.iac-modal-act{border:1px solid var(--iac-bd);background:rgba(255,255,255,.05);color:var(--iac-t);border-radius:12px;padding:8px 10px;cursor:pointer;font-weight:700;}
.iac-modal-body{padding:12px;overflow:auto;overflow-anchor:none;}
.iac-modal-comments{padding:0 12px 12px 12px;overflow:auto;overflow-anchor:none;}
.iac-modal-compose{display:flex;gap:10px;align-items:center;padding:12px;border-top:1px solid var(--iac-bd);background:rgba(0,0,0,.65);}
.iac-modal-compose .iac-comment-input{border-radius:14px;}
.iac-modal-compose .iac-comment-send{border-radius:14px;}

/* Share modal */
.iac-share{position:fixed;inset:0;z-index:10000000020;}
.iac-share-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.72);}
.iac-share-sheet{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(560px,92vw);max-height:80vh;overflow:auto;background:rgba(0,0,0,.9);border:1px solid var(--iac-bd);border-radius:18px;}
.iac-share-top{display:flex;align-items:center;justify-content:space-between;padding:12px 12px 8px 12px;border-bottom:1px solid var(--iac-bd);}
.iac-share-title{font-weight:800;color:var(--iac-t);}
.iac-share-x{width:38px;height:38px;border-radius:12px;border:1px solid var(--iac-bd);background:rgba(255,255,255,.05);color:var(--iac-t);cursor:pointer;font-size:20px;}
.iac-share-body{padding:12px;}
.iac-share-sub{margin-top:12px;color:var(--iac-t2);font-weight:700;font-size:12px;text-transform:uppercase;letter-spacing:.04em;}
.iac-share-btn{border:1px solid var(--iac-bd);background:rgba(255,255,255,.05);color:var(--iac-t);border-radius:12px;padding:10px 12px;cursor:pointer;font-weight:800;width:100%;}
.iac-share-btn[disabled]{opacity:.55;cursor:not-allowed;}
.iac-share-search{margin-top:8px;}
.iac-share-input{width:100%;border:1px solid var(--iac-bd);background:rgba(255,255,255,.04);color:var(--iac-t);border-radius:14px;padding:10px 12px;outline:none;}
.iac-share-results{margin-top:8px;border:1px solid var(--iac-bd);border-radius:14px;overflow:hidden;}
.iac-share-row{display:flex;align-items:center;gap:10px;padding:10px 12px;border-top:1px solid var(--iac-bd);cursor:pointer;background:rgba(255,255,255,.02);}
.iac-share-row:first-child{border-top:0;}
.iac-share-row:hover{background:rgba(255,255,255,.05);}
.iac-share-ava{width:32px;height:32px;border-radius:50%;object-fit:cover;background:rgba(255,255,255,.06);}
.iac-share-name{color:var(--iac-t);font-weight:750;}
.iac-share-picked{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;}
.iac-chip{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--iac-bd);background:rgba(255,255,255,.05);color:var(--iac-t);border-radius:999px;padding:6px 10px;font-weight:700;}
.iac-chip-x{border:0;background:transparent;color:var(--iac-t);cursor:pointer;font-size:16px;line-height:1;}
.iac-share-actions{margin-top:12px;}

/* Mention suggestions */
.iac-mentionbox{position:fixed;z-index:1300;background:rgba(0,0,0,.92);border:1px solid var(--iac-bd);border-radius:14px;overflow:hidden;min-width:240px;max-width:min(420px,92vw);}
.iac-mention-row{display:flex;gap:10px;align-items:center;padding:10px 12px;border-top:1px solid var(--iac-bd);cursor:pointer;}
.iac-mention-row:first-child{border-top:0;}
.iac-mention-row:hover{background:rgba(255,255,255,.05);}
.iac-mention-ava{width:28px;height:28px;border-radius:50%;object-fit:cover;background:rgba(255,255,255,.06);}
.iac-mention-name{color:var(--iac-t);font-weight:750;}
.iac-mention-user{color:var(--iac-t2);font-size:12px;margin-top:1px;}

/* Modal layering + sane scrolling.
   In Atrium, the bottom nav can have a very high z-index; the modal must sit above it.
   Also avoid multiple competing scroll regions that can "hide" the composer. */
.iac-viewer{z-index:999998;}
.iac-modal{z-index:9999999999;}

.iac-modal-sheet{height:100vh;max-height:100vh;overflow:auto;}

/* Single scroller (the sheet). Let the post content take the space it needs.
   Keep composer visible using sticky positioning. */
.iac-modal-body{flex:0 0 auto;max-height:none;overflow:visible;}
.iac-modal-comments{flex:0 0 auto;min-height:0;overflow:visible;padding-bottom:calc(12px + env(safe-area-inset-bottom, 0px));}
.iac-modal-compose{flex:0 0 auto;position:sticky;bottom:0;padding-bottom:calc(12px + env(safe-area-inset-bottom, 0px));}
.iac-modal-compose .iac-comment-input{flex:1;min-width:0;}
.iac-modal-compose .iac-comment-send{flex:0 0 auto;}

@media (max-width: 520px){
  .iac-modal-actions{gap:6px;}
  .iac-modal-act{padding:8px 9px;}
  .iac-modal-body{max-height:none;}
  .iac-modal-compose{flex-direction:column;align-items:stretch;gap:8px;}
  .iac-modal-compose .iac-comment-send{width:100%;}
}

/* Small toast popup */
.iac-toast-wrap{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);z-index:1400;display:flex;flex-direction:column;gap:10px;pointer-events:none;}
.iac-toast{pointer-events:auto;min-width:min(420px,92vw);background:rgba(0,0,0,.88);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:10px 12px;box-shadow:0 18px 50px rgba(0,0,0,.45);display:flex;align-items:center;gap:10px;}
.iac-toast-txt{flex:1;color:#fff;font-size:14px;line-height:1.3;}
.iac-toast-x{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer;font-size:14px;}

@media (max-width: 720px){
  /*
    Mobile profile layout
    - Cover is taller so header has room.
    - Header stack lives *below* the cover; only the avatar overlaps.
    - Actions wrap cleanly and buttons become full-width when needed.
  */
  .iac-cover{height:260px;border-radius:16px;}

  .iac-head{
    flex-wrap:wrap;
    align-items:flex-start;
    gap:12px;
    margin-top:12px;
    padding:0 6px 10px 6px;
  }

  .iac-avatar{
    width:92px;
    height:92px;
    transform:translateY(-46px);
    margin-bottom:-46px;
  }

  .iac-meta{
    flex:1 1 auto;
    min-width:0;
    padding-bottom:0;
  }

  .iac-name{font-size:22px;word-break:break-word;}

  .iac-actions{
    flex:1 1 100%;
    margin-left:0;
    padding-bottom:0;
    display:flex;
  }

  .iac-msg{
    width:100%;
    justify-content:center;
  }

  /* Composer: more breathing room on small screens and prevent "clipped" feeling */
  .iac-composer{top:auto;overflow:visible;padding:16px 12px 14px 12px;}
  .iac-composer-fields{display:flex;flex-direction:column;gap:10px;}
  .iac-input,.iac-textarea{box-sizing:border-box;}
  .iac-textarea{margin-top:0;min-height:120px;padding:12px 12px;}
  .iac-attach-row{margin-top:0;gap:10px;}
  .iac-attach-btn{flex:1 1 auto;justify-content:center;}
  .iac-composer-actions{margin-top:0;}
  .iac-post{width:100%;padding:12px 14px;}

  /* Ensure the last bit of the panel isn't hidden behind mobile UI (bottom bars) */
  .iac-panel{padding-bottom:calc(84px + env(safe-area-inset-bottom));}
  .iac-g-media{height:280px;}
  .iac-g-media img,.iac-g-media video{height:280px;}
}

@media (max-width: 420px){
  .iac-profile{padding:0 12px;}
  .iac-cover{height:240px;}
  .iac-tabs{margin:0 6px 12px 6px;padding:8px;gap:8px;}
  .iac-tab{padding:9px 12px;}
  .iac-panel{margin:0 6px;}
}
